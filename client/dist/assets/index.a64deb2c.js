var O=Object.defineProperty,V=Object.defineProperties;var P=Object.getOwnPropertyDescriptors;var $=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var w=(t,e,s)=>e in t?O(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,p=(t,e)=>{for(var s in e||(e={}))D.call(e,s)&&w(t,s,e[s]);if($)for(var s of $(e))U.call(e,s)&&w(t,s,e[s]);return t},E=(t,e)=>V(t,P(e));import{a as C,l as N,c as B,d as f,m as b,r as I,o as _,b as m,e as a,f as l,w as d,p as R,g as S,h as u,i as F,j as H,F as v,t as q,n as z,u as G,R as W,k as j,q as K}from"./vendor.7e421787.js";const M=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&i(n)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerpolicy&&(r.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?r.credentials="include":o.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}};M();const J=localStorage.getItem("token");var k=C.create({baseURL:"http://localhost:8081/",timeout:1e3,headers:{Authorization:`Bearer ${J}`}});const Q=t=>N("ws://localhost:8081",{auth:{token:`Bearer ${t}`}}),X={namespaced:!0,state:{show:!1,message:"",class:""},mutations:{success(t,e){t.message=e,t.show=!0,setTimeout(()=>{t.show=!1},5e3)},error(t,e){t.message=e,t.show=!0,t.class="text-white bg-danger",setTimeout(()=>{t.show=!1},5e3)}}},Y=Symbol(),c=B({state:{token:localStorage.getItem("token")||"",user:void 0,socket:{}},mutations:{setToken(t,e){localStorage.setItem("token",e),t.token=e},setUser(t,e){t.user=e},setIoClient(t,e){t.socket=Q(e)}},actions:{getAuthenticatedUser(t){return k.post("/auth/user").then(e=>{t.state.token||t.commit("setToken",e.data.token),t.commit("setUser",e.data.user),t.commit("setIoClient",t.state.token)}).catch(e=>{t.commit("setToken","")})}},modules:{toast:X}}),Z="modulepreload",L={},tt="/",h=function(e,s){return!s||s.length===0?e():Promise.all(s.map(i=>{if(i=`${tt}${i}`,i in L)return;L[i]=!0;const o=i.endsWith(".css"),r=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${r}`))return;const n=document.createElement("link");if(n.rel=o?"stylesheet":Z,o||(n.as="script",n.crossOrigin=""),n.href=i,document.head.appendChild(n),o)return new Promise((x,A)=>{n.addEventListener("load",x),n.addEventListener("error",A)})})).then(()=>e())};var y=(t,e)=>{const s=t.__vccOpts||t;for(const[i,o]of e)s[i]=o;return s};const et=f({computed:p({},b(["user"]))}),st=t=>(R("data-v-5292212a"),t=t(),S(),t),ot={class:"container mt-5 py-4"},at={class:"row align-items-md-stretch"},nt=st(()=>a("div",{class:"px-10 py-5 rounded-3 bg-light col-sm-6 h-100 text-center"},[a("a",{class:"text-decoration-none",href:"http://digitalfruit.sytes.net:81"}," Cloud Storage ")],-1)),rt={class:"px-10 py-5 rounded-3 bg-light col-sm-6 h-100 text-center"},it=u(" Simple Multiplayer Game ");function ct(t,e,s,i,o,r){const n=I("RouterLink");return _(),m("main",null,[a("div",ot,[a("div",at,[nt,a("div",rt,[l(n,{class:"text-decoration-none",to:t.user?"/game":"/login"},{default:d(()=>[it]),_:1},8,["to"])])])])])}var lt=y(et,[["render",ct],["__scopeId","data-v-5292212a"]]);const dt=[{path:"/",name:"home",component:lt},{path:"/about",name:"about",component:()=>h(()=>import("./AboutView.e32dd8b2.js"),["assets/AboutView.e32dd8b2.js","assets/AboutView.afb0e465.css","assets/vendor.7e421787.js"])},{path:"/game",component:()=>h(()=>import("./GameView.ebc51e6d.js"),["assets/GameView.ebc51e6d.js","assets/GameView.53f95dc6.css","assets/vendor.7e421787.js","assets/GameApi.fbabae60.js"]),beforeEnter:(t,e,s)=>{c.state.user?s():s(e)}},{path:"/characters",component:()=>h(()=>import("./CharactersView.e30ab9b5.js"),["assets/CharactersView.e30ab9b5.js","assets/CharactersView.f328f0cb.css","assets/GameApi.fbabae60.js","assets/vendor.7e421787.js"]),beforeEnter:(t,e,s)=>{c.state.user?s():s(e)}},{path:"/login",component:()=>h(()=>import("./LoginView.936a0fd3.js"),["assets/LoginView.936a0fd3.js","assets/vendor.7e421787.js"]),beforeEnter:(t,e,s)=>{c.state.token.length>15?s(e):s()}},{path:"/register",component:()=>h(()=>import("./RegisterView.d697812f.js"),["assets/RegisterView.d697812f.js","assets/vendor.7e421787.js"]),beforeEnter:(t,e,s)=>{c.state.token.length>15?s(e):s()}}],T=F({history:H("/"),routes:dt});class ut{static login(e){k.post("/client/login",{email:e.email,password:e.password}).then(s=>{c.commit("setToken",s.data.token),c.commit("setUser",s.data.user),c.commit("setIoClient",s.data.token),T.push("/")}).catch(s=>{console.log(s)})}static register(e){k.post("/client/register",p({},e)).then(s=>{c.commit("setToken",s.data.token),c.commit("setUser",s.data.user),window.location.href="/"}).catch(s=>{var i,o;((o=(i=s.response)==null?void 0:i.data)==null?void 0:o.errors)&&(console.log(s.response.data.errors),s.response.data.errors.forEach(r=>{c.commit("toast/error",r==null?void 0:r.msg)}))})}static logout(){c.commit("setToken",""),c.commit("setUser",void 0)}}var _t="/assets/Digital_fruit.d19bd082.png";const mt=f({computed:p({},b(["user"])),methods:{logout(){ut.logout()}}}),pt=t=>(R("data-v-77a04b94"),t=t(),S(),t),ht={class:"navbar fixed-top navbar-expand-lg navbar-light bg-light"},ft=pt(()=>a("img",{class:"digital-fruit-logo",alt:"Digital Fruit",src:_t},null,-1)),gt={class:"collapse navbar-collapse",id:"navbarSupportedContent"},vt={class:"container-fluid"},kt={class:"navbar-nav fs-5 me-auto mb-2 mb-lg-0"},bt={class:"nav-item"},yt=u("Home"),$t={class:"nav-item"},wt=u("About"),Et={class:"nav-item"},Lt=u("Game"),Ct={class:"nav-item"},It=u("Characters"),Rt={class:"ms-auto nav-item"},St=u("Logout"),Tt={class:"ms-auto nav-item"},xt=u("Login"),At={class:"nav-item"},Ot=u("Register");function Vt(t,e,s,i,o,r){const n=I("RouterLink");return _(),m("nav",ht,[l(n,{to:"/"},{default:d(()=>[ft]),_:1}),a("div",gt,[a("div",vt,[a("ul",kt,[a("li",bt,[l(n,{class:"nav-link",to:"/"},{default:d(()=>[yt]),_:1})]),a("li",$t,[l(n,{class:"nav-link",to:"/about"},{default:d(()=>[wt]),_:1})]),t.user?(_(),m(v,{key:0},[a("li",Et,[l(n,{class:"nav-link",to:"/game"},{default:d(()=>[Lt]),_:1})]),a("li",Ct,[l(n,{class:"nav-link",to:"/characters"},{default:d(()=>[It]),_:1})]),a("li",Rt,[l(n,{class:"nav-link",to:"/login",onClick:t.logout},{default:d(()=>[St]),_:1},8,["onClick"])])],64)):(_(),m(v,{key:1},[a("li",Tt,[l(n,{class:"nav-link",to:"/login"},{default:d(()=>[xt]),_:1})]),a("li",At,[l(n,{class:"nav-link",to:"/register"},{default:d(()=>[Ot]),_:1})])],64))])])])])}var Pt=y(mt,[["render",Vt],["__scopeId","data-v-77a04b94"]]);const Dt=f({name:"Toast",data(){return{}},computed:E(p({},b("toast",["show","message","class"])),{toastClass(){let t="";return this.show?t+="show":t+="hide",this.class&&(t+=" "+this.class),t}}),methods:{}}),Ut={class:"toast-container position-fixed p3",style:{right:"30px",bottom:"30px"}},Nt={class:"d-flex"},Bt={class:"toast-body"},Ft=a("button",{type:"button",class:"btn-close me-2 m-auto","data-bs-dismiss":"toast","aria-label":"Close"},null,-1);function Ht(t,e,s,i,o,r){return _(),m("div",Ut,[a("div",{class:z(["toast fade align-items-center",t.toastClass]),role:"alert","aria-live":"assertive","aria-atomic":"true"},[a("div",Nt,[a("div",Bt,q(t.message),1),Ft])],2)])}var qt=y(Dt,[["render",Ht]]);const zt=a("footer",{class:"py-2 mt-4 page-footer col-sm-12 text-muted text-center bg-white border-top"},[a("div",{class:"container"},[a("div",null," \xA9 Digital Fruit 2021 ")])],-1),Gt=f({setup(t){return(e,s)=>(_(),m(v,null,[a("header",null,[l(Pt)]),l(G(W),{class:"pt-6 mb-5"}),l(qt),zt],64))}});const g=j(Gt);g.use(T);g.use(c,Y);g.use(K,C.create({baseURL:"http://localhost:8081/",timeout:1e3}));c.dispatch("getAuthenticatedUser");g.mount("#app");export{ut as R,y as _,_t as a,k as b,c as s};
